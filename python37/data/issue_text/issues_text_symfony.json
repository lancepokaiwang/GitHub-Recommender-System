{
    "18230678": {
        "title": "Add @since tags to core",
        "body": "I think that we should add `@since` tags to all classes and methods in core:rnrn```phprn/**rn * @since 2.1.0rn */rnclass Foorn{rn    /**rn     * @since 2.2.1rn     */rn    public function bar() { ... }rn}rn```rnrnThis greatly facilitates maintenance, because if I discover a bug in class `Foo` or method `Foo::bar()`, I immediately know which branch to fix it on. Currently, you have to do a lot of Git blaming or trial and error to find out which branch to fix something on."
    },
    "16262415": {
        "title": "CssSelector should be configured properly when used for HTML or XML",
        "body": "... but that's not really possible when using it from BrowserKit as the Crawler is created directly.rnrnFrom #8286:rnrn    In functional test, since the crawler is instanciated by the de browser kit (which rn    know the content-type), Can we imagine the browser kit call for usrn    disableHtmlExtension or enableHtmlExtension"
    },
    "15752417": {
        "title": "BrowserKit CookieJar is totally ignorant of RFC 6265 edge cases",
        "body": "The `BrowserKit/CookieJar` code [uses exact domain and path matches](https://github.com/symfony/BrowserKit/blob/master/CookieJar.php#L58) to store and retrieve cookies:rnrn`$this->cookieJar[$domain][$path][$name]`rnrnThis utterly fails the [requirements of RFC 6265 for matching domains](http://tools.ietf.org/html/rfc6265#section-4.1.2.3):rnrn> For example, if the value of the Domain attribute is example.com, the user agent will include the cookie in the Cookie header when making HTTP requests to example.com, www.example.com, and www.corp.example.com.rnrnrnIf you load any google resource you'll receive a cookie with `domain=.google.com`. According to the RFC this cookie should match any domain ending in .google.com as well as google.com itself.rnrnSimilar problems exist with path matching where leading and trailing slashes figure in to whether or not a cookie matches what's stored in the `CookieJar`. From [the relevant RFC section](http://tools.ietf.org/html/rfc6265#section-4.1.2.4):rnrn> The user agent will include the cookie in an HTTP request only if the path portion of the request-uri matches (or is a subdirectory of) the cookie's Path attribute, where the %x2F (/) character is interpreted as a directory separator.rnrnExact path matches aren't sufficient -- subdirectory paths should also be matched."
    },
    "13800942": {
        "title": "[FR] [Process] tweaks",
        "body": "In SymfonyComponentProcessProcessrn1. Provide a way to clear the $stdout and $stderr (in case when executable program produces too much output and we use incremental output)rn2. Add getter (or change private to protected) for processInformation (it's impossible now to get PID for example)"
    },
    "13169284": {
        "title": "[DomCrawler] need for submitting invalid choice values",
        "body": "It seems to be not possible to submit an invalid value for a choice field in a form using BrowserKit's Client. This is prevented by https://github.com/symfony/symfony/blob/v2.1.9/src/Symfony/Component/DomCrawler/Field/ChoiceFormField.php#L140, which doesn't make sense when writing integration tests, as I'd like to see the expected form validation errors.rnrnWhat's the purpose of those checks and, if they are needed, how can they be disabled for tests?"
    },
    "11098174": {
        "title": "[security] Enable a firewall to a specific host (subdomain)",
        "body": "Symfony 2.2 introduces a possibility to point a route to a specific host, or a subdomain.rnrnNow, it should be possible to define a specific host to a firewall. I believe it should be like this:rnrn```ymlrnfirewalls:rntmanager:rn        pattern: ^/.*rn        host: manager.domain.comrn        ...rn```"
    },
    "10412830": {
        "title": "[BrowserKit] Form names with . are converted to _ (breaks compatibility with non-PHP forms)",
        "body": "Symfony/Component/BrowserKit/Client->submit uses $form->getPhpValues() which uses parsestr which automagically converts . to _, this breaks compatibility with forms intended for non-PHP services.rnrn**Background**rnI am trying to write a functional test for connecting to an OpenID2 implementation in ASP.NET, however this requires use of a (auto-submitted by javascript) form with names like hidden form names like openid.mode.rnrn"
    },
    "9374910": {
        "title": "[3.0] [HttpFoundation] consider renaming Request::getPathInfo() to getPath()",
        "body": "The method name for `Request::getPathInfo()` is so bad becausern1. it returns the path of a URI and not a path info (there is no such thing in the URI spec)rn2. it suggest to return more info in form of an array like the php function [pathinfo](http://php.net/manual/en/function.pathinfo.php]) does, but it only returns the plain pathrnrnSo the name is really confusing as it does not behave similar to phps pathinfo() and is also semantically wrong.rnrnI suggest to deprecate `getPathInfo()` and introduce `getPath()`.rnWorking with it bothered me ever since. And I think we should fix that now before it's too late."
    },
    "9103421": {
        "title": "Form fields and buttons do not follow the ownership overwrite defined by form-attributes",
        "body": "I was redirected here from Goutte, on the issue of form fields with a form attribute not getting correctly processed.nnThe gist of it is: the form attribute (placed on fields and buttons and such) is an overwrite to the form ownership property of the element. This means that regardless of where the field (or button) is it should behave as-if it were inside the form identified by the ID defined by the value of the attribute. nnSome official docs:nhttp://dev.w3.org/html5/spec/single-page.html#attr-fae-formnnWith the exception of IE (10 included), all modern browsers support it fine. In the case of IE it's a simple javascript fixu2014just like every other normal html5 feature. For the case of tests and such it would be very useful for the standard behavior to work (especially when there's no real way to work around it).nnThe following is a basic behat test (assume Goutte driver), so as to avoid very wordy explanations on other points related to it.n~~~n@environmentnFeature: test environment driversn  In order perform tests successfullyn  As a Developern  Test drivers must conform to standardsnn  Background:ntGiven I am on the test sitent  And I am on /tests/form-attribute.phpnn  Scenario: press button_1 of form_1 from inside of form_1ntGiven I press Capture fieldsnt Then I should see form_name is form_1nt  And I should see 2 applesnt  And I should see 0 orangesnt  And I should see button_1 presentnt  And I should see button_2 not presentnt  And I should see button_3 not presentnt  And I should see outer_field presentnn  Scenario: press button_3 of form_1 from inside of form_2ntGiven I press Submit from outside the formnt Then I should see form_name is form_1nt  And I should see 2 applesnt  And I should see 0 orangesnt  And I should see button_1 not presentnt  And I should see button_2 not presentnt  And I should see button_3 presentnt  And I should see outer_field presentnn  Scenario: press button_2 of form_2 from inside of form_1ntGiven I press Submit form_2nt Then I should see form_name is form_2nt  And I should see 0 applesnt  And I should see 3 orangesnt  And I should see button_1 not presentnt  And I should see button_2 presentnt  And I should see button_3 not presentnt  And I should see outer_field not presentn      n~~~nnWhere `/tests/form-attribute.php` is as follows...n~~~n<!DOCTYPE html>n<meta charset=utf-8>n<title>Test Case</title>nn<?php if ($_SERVER['REQUEST_METHOD'] !== 'POST'): ?>nnt<form id=form_1 action=<?= $_SERVER['REQUEST_URI'] ?> method=POST>ntt<input type=checkbox name=apples[] value=1 checked/>ntt<input form=form_1 type=hidden name=form_name value=form_1/>ntt<button form=form_1 type=submit name=button_1>Capture fields</button>ntt<button form=form_2 type=submit name=button_2>Submit form_2</button>nt</form>nnt<input form=form_1 type=checkbox name=apples[] value=2 checked/>nnt<form id=form_2 action=<?= $_SERVER['REQUEST_URI'] ?> method=POST>ntt<input form=form_2 type=checkbox name=oranges[] value=1 checked/>ntt<input form=form_2 type=checkbox name=oranges[] value=2 checked/>ntt<input form=form_2 type=checkbox name=oranges[] value=3 checked/>ntt<input form=form_2 type=hidden name=form_name value=form_2/>ntt<input form=form_1 type=hidden name=outer_field value=success/>ntt<button form=form_1 type=submit name=button_3>Submit from outside the form</button>nt</form>nn<?php else: ?>nn<?ntecho 'form_name is '.(isset($_POST['form_name']) ? $_POST['form_name'] : 'undefined').<br/>n;ntecho (isset($_POST['apples']) ? count($_POST['apples']) : 0). apples<br/>n;ntecho (isset($_POST['oranges']) ? count($_POST['oranges']) : 0). oranges<br/>n;nntforeach (['button_1', 'button_2', 'button_3', 'outer_field'] as $key)nt{nttecho $key.' '.(isset($_POST[$key]) ? 'present' : 'not present').<br/>n;nt}nntecho <hr/>n;nntvar_dump($_POST);n?>nn<?php endif; ?>n~~~n"
    },
    "8214440": {
        "title": "[Form] Improve default form error messages",
        "body": "I think that in order to provide a better user experience, we should improve the error messages shipped with the Form component by default. I am **not** talking about the error messages in the Validator component.rnrnIf I use the Validator component stand-alone, getting an error such as This value is not a valid number is fine. If I use the Form component, displaying that message for a form field is a bit awkward. Even worse are the tons of This value is invalid messages.rnrnI suggest tornrn1. Set sensible defaults for the invalid_message options in all core types. These defaults should be user friendly, such as Please enter a valid email address. (or better, if you have suggestions)rn2. Duplicate the error messages of the Validator component into the Form component and change the translations to be more user friendly (in the web form context, again, such as Please enter a valid number or better). This will mean a bit more maintenance work, but much better UX.rnrnOpinions? How would you ideally like the error messages to be when you submit an erroneous field?"
    },
    "7723266": {
        "title": "[Form] Rename empty_value option to placeholder",
        "body": "See #4715 for reference.rnrnThe empty_value option of ChoiceType (and consequentially EntityType) is used to configure the displayed values of the dropdowns when the field is empty. This is analogous to the placeholder HTML5 attribute of other field types.rnrnI propose to deprecate empty_value and add a new option placeholder tornrn* ChoiceTypern* all types represented by input widgets that support this attribute"
    },
    "6816718": {
        "title": "make Translation:update Command more robust",
        "body": "Nowadays i'm often getting Error's if I try to update translation-file like this:n  [Twig_Error_Runtime]                                                       n  Attribute value does not exist for Node Twig_Node_Expression_GetAttr. nnIt seem's it come's from dynamic part of a transaltion. The Problem is, that it abort on the first twig error, it would be nice if the command run through and make what he can make. --ignore-expetionsnnOr just get in a prefix-viewfolder as argument:nnnn```n    $extractor->extract($foundBundle->getPath().'/Resources/views/'.$viewfolder, $catalogue);"
    },
    "6379747": {
        "title": "[Feature Request] Absolute asset URL",
        "body": "Hey guys!nnCurrently, there's no standard way of retrieving the absolute URL to an asset. This would be useful when generating asset paths in a template for an email. Would be cool a function like:nn```twign{{ asset_url('images/foo.jpg') }}n```nnThe current solution is not pratical and breaks when using CDN.nnThanks,nMarcos"
    },
    "5827000": {
        "title": "ParameterBag's remove function only allows to remove one level deep",
        "body": "If a parameter is an array it cannot remove elements inside the array, only the array itself. nFor instance I have the following request using the SonataMediaBundle:nn[common_mybundle_mytype] => array(n    [media] => array(n        [binaryContent] => nulln    ),n    [title] => 'Message title',n    [text] => 'Message textn)nnSay I want to remove the media only. With the current function I can only remove the full request. I have rewritten the function to the following:nn    File: SymfonyComponentHttpFoundationParameterBagnn    public function remove($key)n    {n        if(is_array($key))n        {n            $c = '$this->parameters';nn            foreach($key as $k)n            {n                $c .= '['' . $k . '']';n            }n            eval(unset($c););n        }n        elsen        {n            unset($this->parameters[$key]);n        }n    }"
    },
    "5567424": {
        "title": "HttpCache files getting too big",
        "body": "When using the HttpCache, there are files created in the app/cache/prod/http_cache/md for each url. Each time this url is accessed with a differente cookie, an entry is added (because we do vary on cookie). After some days or weeks this file is getting too big. The expired entries are not removed. I don't know if its best to create a command to remove old items, or to do it after lookup, or after write. Maybe just need to clear the cache every night :)nnhttps://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/HttpCache/HttpCache.phpnhttps://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/HttpCache/Store.php"
    },
    "1887255": {
        "title": "[Form][Guesser] ValidatorTypeGuesser does not consider validation_groups option",
        "body": "The `ValidatorTypeGuesser` does not consider the current form's `validation_groups` option when guessing type. This could be fixed by passing the options array to the guesser methods. The signature of the `FormTypeGuesserInterface` methods would look like this:rnrn    function guessType($class, $property, array $options = array());rnrnThe default argument is provided for BC."
    },
    "1184805": {
        "title": "[Validator] Improve EmailValidator",
        "body": "We really should migrate away from filter_var to a stronger solution like http://code.google.com/p/isemail/source/browse/PHP/trunk/is_email.php which seems like the only solution mentioning RFCs, being maintained, and not being dependent on a specific PHP version.rnrnI emailed the author to see if he would be willing to migrate it to a more class-based approach and remove all those constants from the global namespace."
    },
    "19047724": {
        "title": "UPGRADE docs doesn't mention remove of addViolationAtPath",
        "body": "The UPGRADE docs document doesn't mention the remove of the method the remove of the method `addViolationAtPath()`."
    },
    "17502295": {
        "title": "Process filling up temp directory on Windows",
        "body": "SymfonyComponentProcessrnI'm getting this error after running a process for a long timernA temporary file could not be opened to write the process output to, verify that your TEMP environment variable is writablernSeems to be the windows workaround in getDescriptors()rnI found the problem to be 65,000 temp files created by this file in my windows temp but not removed. I have to clear these out daily.rnPHP should remove the files but they slowly build up."
    },
    "14401746": {
        "title": "php.ini post_max_size = 0 clash with form validator",
        "body": "If in the php.ini post_max_size is set to 0, there is no limitation in the post size:rn[from php.ini]rn; Maximum size of POST data that PHP will accept.rn; Its value may be 0 to disable the limit. It is ignored if POST data readingrn; is disabled through enable_post_data_reading.rn; http://php.net/post-max-sizernpost_max_size = 0rnrnHowever, in this case, the validator (tested via Form) trigger alwaysrnThe uploaded file was too large. Please try to upload a smaller file.rnrn[Fix]rnEnable the control only if post_max_size > 0"
    },
    "14273793": {
        "title": "[DependencyInjection] Dumping out container may produce syntax error code",
        "body": "Create a service where name contains - and there will be a syntax error.rnrnI think the root of the problem is that PhpDumper uses Container::camelize to generate function names which doesn't comply with PHP labels.rnrnIn my opinion, PhpDumper should use an internal function to generate PHP label-safe identifiers from service names, it would be more general solution than restrict service names.rnrnIf you agree i would like to push this change.rnrn"
    },
    "14259080": {
        "title": "Use more explicit namespaces in composer definitions",
        "body": "Please note namespace declarations should end in `` to make sure the autoloader responds exactly. For example `Foo` would match in `FooBar` so the trailing backslashes solve the problem: `Foo` and `FooBar` are distinct.rnrnFor reference: https://github.com/composer/composer/pull/1891/files"
    },
    "13998113": {
        "title": "[Console] Improve abbreviation recognition",
        "body": "1. For example I have 2 commands:rn```rnxxx:foo:barrnyyy:faa:zoorn```rnWhen I try to callrn```rnphp test.php xxx:f:brn```rnI get an InvalidArgumentException - The namespace xxx:f is ambiguous (foo, faa).rnbut the namespace xxx:faa not defined!rnrn2. If I have rn```rnxxx:foo:barrnxxx:faa:zoorn```rnand call `x:f:z` then it should run xxx:faa:zoo (because no more command has same abbreviation)rnrn"
    },
    "13963217": {
        "title": "[BrowserKit] on followRedirect, client doesn't resend HTTP headers",
        "body": "In this simple case rnrn```rn$headers = array('HTTP_Content_Type' => 'application/vnd.custom+xml');rn$crawler = $client->request($method, $uri, $params, array(), $headers);rn```rnrnwhen server returns redirect, ```Content-Type``` header will not be sent to new location."
    },
    "13435189": {
        "title": "BrowserKit recursive redirect",
        "body": "If a redirect-header is returned by a request of some url and the redirect-url is just the same as the requested url (thus its a recursive redirect) then the BrowserKit client will follow the recursive tree until the php maximum function nesting level, which by default is 100.rnrnBrowserKit should have a configurable (?) maximum for following redirects and the ->request() call should return nicely (at least with a clean exception?) if it reaches the maximum."
    },
    "13254373": {
        "title": "[HttpFoundation] allow database Session Handlers to be extended",
        "body": "If there's additional actions to be done on on session events (additional cleanup on destroy/gc, or additional logging on other events, it would be nice to be able to extend the `PdoSessionHandler` and `MongoDbSessionHandler` classes. However, both have their database connections set to `private`.rnrnI can think of two ways of accomplishing this: either setting those connectors to `protected`, so child objects can access them, or to add an additional `getConnection()` method, to provide read-only access to those connectors. More complex would be to add some sort of event system such that the session handlers broadcast to other listeners when a session event happens.rnrnIs there a better way to accomplish doing other tasks when a session event happens?"
    },
    "13116635": {
        "title": "XmlUtils::phpize floats integer-lists",
        "body": "I'm trying to let my config accept:rn```rn<node attribute=1234,5678,9101,1121,3141 />rn```rnto parse the this attribute as a string. But the SymfonyComponentConfigUtilXmlUtils::phpize-Method (previously SimpleXMLElement::phpize) replaces this to float(1.2345678910111E+19).rnrnThis is caused by the preg_match-case."
    },
    "13111578": {
        "title": "[HttpKernel] Improve TraceableEventDispatcher to not call Stopwatch::stop() when not started",
        "body": "Currently, in TraceableEventDispatcher:385, Stopwatch::stop() is called even when the Stopwatch was not started:rnrn```phprncase KernelEvents::RESPONSE:rn    // stop only if a controller has been executedrn    try {rn        $this->stopwatch->stop('controller');rn    } catch (LogicException $e) {rn    }rn    break;rn```rnrnThe result is that on every request, an exception will be thrown and caught (consequently this is not an exceptional case anymore). Another consequence is that debuggers will halt and show this exception (again, on every request).rnrnAn improvement would be to add a Stopwatch::isStarted() method and use it instead:rnrn```phprncase KernelEvents::RESPONSE:rn    // stop only if a controller has been executedrn    if ($this->stopwatch->isStarted('controller')) {rn        $this->stopwatch->stop('controller');rn    }rn    break;rn```"
    },
    "12950953": {
        "title": "Login Redirect Does not Honor Query String Parameters",
        "body": "When a user successfully logs in, the user is redirected to the page he originally was trying to view via the onAuthenticationSuccess() function in  https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Authentication/DefaultAuthenticationSuccessHandler.php.rnrnI am using a javascript history state library to keep track of my javascript frontend state and it generates urls such as ```/my/site#foo=bar&more=links```.rnrnWhen I am redirected from the login page, all the query string parameters after the url ```#foo=bar&more=links``` are not preserved. Could this possibly be fixed in future versions or is there a good reason not to honor the states of these types of requests?rn"
    },
    "12900121": {
        "title": "[Routing] Cannot specify port for route with hostname",
        "body": "By default the router uses the port of the current request when linking to an external site and there's no way to override it.rnrnFor example, an application that runs on port 8888, when generating a url from a route such as below, will generate the url //example.com:8888/article/view/{id}.rnrn```ymlrnmy_route:rn    pattern: /article/view/{id}rn    hostname: example.comrn```rnrnAlso, if you try to specify a port number in the hostname, e.g.rnrn```rnmy_routern    pattern: /article/view/{id}rn    hostname: example.com:80rn```rnrnIt will generate a url similar to //example.com:80:8888/article/view/{id}.rnrnMy first thought would be to introduce a 'port' parameter, which can be used to specify the port, and if it's not provided fall back to the port for the current request?rnrnWe only use the hostname parameter to generate url's for an external site which we need to link to, so I'm not sure how this works in regards to matching a route."
    },
    "12873934": {
        "title": "XML and Yaml format doesn't work with Optional/Required collection constraints",
        "body": "Assume we have this entity:rn````phprnclass Authorrn{rn    /**rn     * @AssertCollection(fields={rn     *     alternate_email = @Optional({@AssertEmail})rn     * })rn    public $profileData = array();rn}rn````rnrnThe annotations and PHP format is working as expected. However, the Yaml and Xml format isn't working. On the documentation, we (ryan, @afishnamedsquish and I) have put some time in trying to get a working Yaml and Xml format, but it seems like it's not possible.rnrnIf we have this:rn````yamlrnAcmeAuthorBundleEntityAuthor:rn    properties:rn        profileData:rn             - Collection:rn                fields:rn                    alternate_email:rn                        - CollectionOptional:rn                            - Email: ~rn````rnWe get this error:rnrn > Fatal error: Class 'SymfonyComponentValidatorConstraintsCollectionOptionalValidator'rnrnIt's going wrong in [`Collection` line 50](https://github.com/symfony/Validator/blob/2.1/Constraints/Collection.php#L50-52):rnrn````phprnif (!$field instanceof Optional && !$field instanceof Required) {rn    $this->fields[$fieldName] = $field = new Required($field);rn}rn````rn`$field` is an instance of Optional or Required when using PHP or annotations. When using Yaml, `$field` is an array:rnrn    array (size=1)rn      0 => rn        object(SymfonyComponentValidatorConstraintsCollectionOptional)[4300]rn          public 'constraints' => rn            array (size=1)rn              0 => rn                object(SymfonyComponentValidatorConstraintsEmail)[4301]rn                  ...rn          public 'groups' => rn            array (size=1)rn              0 => string 'Default' (length=7)rnrnBecause it's not an instance of Optional or Required, it becomes:rnrn    object(SymfonyComponentValidatorConstraintsCollectionRequired)[4302]rn      public 'constraints' => rn        array (size=1)rn          0 => rn            object(SymfonyComponentValidatorConstraintsCollectionOptional)[4300]rn              public 'constraints' => rn                array (size=1)rn                  ...rn              public 'groups' => rn                array (size=1)rn                  ...rn      public 'groups' => rn        array (size=1)rn          0 => string 'Default' (length=7)rnrnAnd that's when we are in trouble, because the `ValidatorFactory` will search for `OptionalValidator`.rnrnI have tried every Yaml syntax I know to make `$field` a class and not an array, but I can't find it. I think some change in the `YamlFileLoader` is needed to make these edge cases work.rnrnThis is the same for Xml:rn````xmlrn<?xml version=1.0 encoding=UTF-8 ?>rn<constraint-mapping xmlns=http://symfony.com/schema/dic/constraint-mappingrn    xmlns:xsi=http://www.w3.org/2001/XMLSchema-instancern    xsi:schemaLocation=http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd>rnrn    <class name=AcmeAuthorBundleEntityAuthor>rn        <property name=profileData>rn            <constraint name=Collection>rn                <option name=fields>rn                    <value key=alternate_email>rn                        <constraint name=CollectionOptional>rn                            <constraint name=Email />rn                        </constraint>rn                    </value>rn                </option>rn            </constraint>rn        </property>rn    </class>rn</constraint-mapping>rn````rnrnIf you want some background on this issue, see symfony/symfony-docs#2432 and [this gist](https://gist.github.com/afishnamedsquish/5277987)."
    },
    "12834613": {
        "title": "Bug with NamespacedAttributeBag in use with session",
        "body": "Hi !rnrnI have set my application to use the NamespacedAttributeBag for sessions.rnrnI've observed the following behavior:rnrnIn my template, if I do this:rnrn    {{dump(app.session.get(cart , 0))}}rnrnIt dumps:rnrn    array (size=1)rn      1 => rn        array (size=1)rn          2 => rn            array (size=1)rn              8 => int 1rnrnThat is the expected behaviorrnrnNow if I do:rnrn    {{dump(app.session.get(cart/1/2 , 0))}}rnrnI get:rnrn    array (size=1)rn      8 => int 1rnrnThat's fine too.rnrnAnd finally, if I do this:rnrn    {{dump(app.session.get(cart/1/1/2 , 0))}}rnrnI get:rnrn    array (size=1)rn       8 => int 1rnrnThat is not fine! I should get 0 or null. There is no array in cart[1][1] !rnrnIs that a bug ?"
    },
    "12728018": {
        "title": "[Console] DialogHelper::ask() while loop issue with 0",
        "body": "The while loop in `SymfonyComponentConsoleHelperDialogHelper::ask()` terminates, when you enter a 0. `fread` gets the 0 and assigns it to `$c` and then the loop breaks. As we all know PHP interpretes a 0 as false.rnrnI tried to fix it and came up with the following idea using `ord()` and `chr()`:rnrn~~~ phprn...rnwhile ($c = ord(fread($inputStream, 1))) {rn    $c = chr($c);rn...rn~~~rnrnIt solves the problem but I find it rather ugly. rnrnDoes anyone have a better idea about this?"
    },
    "12664314": {
        "title": "[Profiler] Backslash before slash",
        "body": "In u201cRequestu201d tab of profiler, there is a backslash before all the slashs and backslashs (see screenshot)u2026 I just did the upgrade to Symfony 2.2.rn![screen](https://f.cloud.github.com/assets/1258839/324302/21576eea-9ae1-11e2-96c3-0a358b657e33.png)"
    },
    "12508458": {
        "title": "SymfonyComponentDomCrawlerCrawler::addContent() - handling of MIME types",
        "body": "If the server responds with an empty HTTP Content-Type, 'text/html' is assumed, which is good.  However, if the Content-Type contains a charset but no MIME type, e.g. 'charset=utf-8' or '; charset=utf-8', the method returns null and the DOM is not parsed.rnrnDesired behaviour is that a Content-Type with a charset but no MIME type should be treated in the same way as an empty Content-Type, with regards to the default 'text/html' MIME being assumed.  This is the way my browser responds to such a Content-Type when there is HTML in the response body.rnrnThis was relevant to me because of a bug in ZF2 and the Content-Type headers it returns under certain circumstances, and the use of the Symfony DomCrawler component in the Behat integration testing/BDD tool.  I will pursue the Zend bug separately."
    },
    "12211096": {
        "title": "[Service Container] Container camelize strange behavior",
        "body": "At Container the method camelize:rnrn```phprn    /**rn     * Camelizes a string.rn     *rn     * @param string $id A string to camelizern     *rn     * @return string The camelized stringrn     */rn    public static function camelize($id)rn    {rn        return preg_replace_callback('/(^|_|.)+(.)/', function ($match) { return ('.' === $match[1] ? '_' : '').strtoupper($match[2]); }, $id);rn    }rn```rnrnI don't understand why if the first char is . or _ is kept:rnrn```phprnphp > function camelize($id) { return preg_replace_callback('/(^|_|.)+(.)/', function ($match) { return ('.' === $match[1] ? '_' : '').strtoupper($match[2]); }, $id); }rnphp > echo camelize('test.test2') . n;rnTest_Test2rnphp > echo camelize('.testtest2') . n;rn.testtest2rnphp > echo camelize('test_test2') . n;rnTestTest2rnphp > echo camelize('_test_test2') . n;rn_testTest2rn```rnrnIf the camelize is used to transform for example an array on several variables it will fail:rnrn```phprnphp > $.t = 5;rnPHP Parse error:  syntax error, unexpected '.', expecting variable (T_VARIABLE) or '$' in php shell code on line 1rnrnParse error: syntax error, unexpected '.', expecting variable (T_VARIABLE) or '$' in php shell code on line 1rn```rnrnAnd is really strange that after you camelize a string it still keep underscore. My suggestion is that if a _ or . exists as first character would disappear on camelize, so instead of the below behavior both would return TestDarnrn```phprnphp > echo camelize('test_da') . n;rnTestDarnphp > echo camelize('_test_da') . n;rn_testDarn```"
    },
    "11853585": {
        "title": "BrowserKit::request does not handle network paths (Functional test for subdomains)",
        "body": "Hello,rnrnThere is a problem related to test for subdomains (all other tests work). Maybe I do something wrong!! I am able to access to sob-domain directly from a browser as will as I see the route in terminal ```app/console router:debug -e=test```rnrnthe routernrn    anf_word_scrabble_widget:rn        path:   /scrabble/scrabble-finder-widget.phprn        defaults:  { _controller: MyBundle:Default:widget }rn        host:     w.{domain}rn        requirements:rn             domain: %domain%rnrnconfig.ymlrnrn    domain: example.localrnrntestrnrn    public function testWidget()rn    {rn       $client = static::createClient();rn    rn       $router = $client->getContainer()->get('router');rn       $domain = $client->getContainer()->getParameter('domain');rn    rn      $url = $router->generate('anf_word_scrabble_widget', array('domain' => $domain));rnrn      $crawler = $client->request('GET', $url);rn      $this->assertEquals(200, $client->getResponse()->getStatusCode());rn    }rnrnit throws an exception rnrn    No route found for &quot;GET //w.example.local/scrabble/scrabble-finder-widget.php&quot; (404 Not Found)rnrnrnI have tried to use rnrn    $client = static::createClient(array(), array(rn    'HTTP_HOST'       => 'w.example.local',rn    ));rnrnrnbut the same!rn"
    },
    "11684078": {
        "title": "[2.2][Yaml] Blank values should resolve to null",
        "body": "The following syntax was valid in 2.1, and should be valid according to the YAML spec:rnrn    db.options:rn      password:rn    myproject.test:rn      param2: 456rnrnHowever, since 2.2 this throws a `SymfonyComponentYamlExceptionParseException`: Indentation problem in file.yml at line 2 (near password:).rnrnIMO this should be fixed. Or if the BC break was intentional, it should be documented."
    },
    "11611544": {
        "title": "[console]  add __toString() on ArgvInput",
        "body": "Hi There,rnrnI was wondering if a __toString() method could be added to SymfonyComponentConsoleInputArgvInput or at least StringInput,  It would be helpful repackage a command line after its been parsed, among other thingsrnrn-Thanks"
    },
    "11600112": {
        "title": "php templating engine service is inaccessible (set to private)",
        "body": "Can we change the service to public? If so, would that be considered a bugrnfix or a new feature?"
    },
    "11511248": {
        "title": "[2.0][2.1][FrameworkBundle] disabling CSRF protection doesn't work with the `enabled` flag",
        "body": "Usingrn```rnframework:rn  csrf_protection:rn    enabled: falsern```rnonly disables the CSRF protection for Symfony 2.2. But to work with 2.0, 2.1, and 2.2 actuallyrn```rnframework:rn  csrf_protection: falsern```rnhas to be used.rnrnSee https://travis-ci.org/craue/TwigExtensionsBundle/builds/5138388 and https://travis-ci.org/craue/TwigExtensionsBundle/builds/5139467 ."
    },
    "11507972": {
        "title": "[DomCrawler] relative links",
        "body": "relative links seems not to be handled correct inside `Link` the classrnrnI would expectrnrn```phprn    public function testRelativeLink()rn    {rn        $dom = new DOMDocument();rn        $dom->loadHTML('<html><a href=../foo>foo</a></html>');rnrn        $node = $dom->getElementsByTagName('a')->item(0);rn        $link = new Link($node, 'http://example.com/bar/');rnrn        $this->assertEquals('http://example.com/foo', $link->getUri());rn    }rn```"
    },
    "11338172": {
        "title": "[HTTPFoundation] Use `apache_request_headers` when available",
        "body": "Both my Apache installs strip `Authorization` headers (even though they're not CGI implementations) and don't populate `HTTP_AUTHORIZATION`.rnrnUsing `apache_request_headers` when available, would seem to be more robust."
    },
    "11337837": {
        "title": "Schema relative URLs not working in combination with the TestClient",
        "body": "The schema relative URLs introduced in #3958 are great. However, this does not seem to be working in combination with the TestClient. The URLs that are generated with a relative schema are being prefixed with the configured host and the default schema.rnrnE.g.rnrn```jinjarn{{ url('blog', {}, true) }}rn```rnrnWhen on `http://localhost` test client will try to visit: `http://localhost//localhost/blog` instead of `http://localhost/blog`.rnrn"
    },
    "11203908": {
        "title": "[Form] Binding false to a checkbox makes the checkbox being checked by default",
        "body": "I am not sure about whether this is a bug or by design: if a checkbox is bound to a boolean FALSE value, the checkbox is checked by default.rnrnFailing test case:rn```phprn    public function testBindWithFalseValueUnchecked()rn    {rn        $form = $this->factory->create('checkbox', null, array(rn            'value' => '1',rn        ));rn        $form->bind(false);rnrn        $this->assertFalse($form->getData());rn        $view = $form->createView();rn        $this->assertFalse($view->vars['checked']);rn    }rn```"
    },
    "11110070": {
        "title": "[Process] Add a version check to the code added in #7102",
        "body": "When PHP 5.5 is released, and if the code still seems to work fine, a version check could /should be added to the block added in #7102 so that it's only executed on 5.3/5.4 since these are the buggy versions."
    },
    "11023512": {
        "title": "[Process] Orphan temporary files are left on Windows",
        "body": "On Windows `Process::start` creates a temporary file every time because of this code:rn```phprn        if (defined('PHP_WINDOWS_VERSION_BUILD')) {rn            $this->fileHandles = array(rn                self::STDOUT => tmpfile(),rn            );rn```rnWhen being invoked for thousands of times as part of task scheduling pipeline, it leaves thousands of temporary files and eventually hits the limit at 65536 files per directory, after which point it can't create a new temporary file and simply dies.rnrnAfter being used, the temporary file should be deleted."
    },
    "10704019": {
        "title": "[DomCrawler] Uppercase HTTP/HTTPS/FILE not seen as absolute URL",
        "body": "See the line here:rnhttps://github.com/symfony/DomCrawler/blob/master/Link.php#L49rnrnIf a URL from a crawled page is badly formed to use an uppercase URI scheme, DomCrawler will not recognize it as an absolute link."
    },
    "10605836": {
        "title": "BinaryFileResponse - Error on calculate end value",
        "body": "the end is calculated wrong:rnlist($start, $end) = array_map('intval', explode('-', substr($range, 6), 2)) + array(0);rnrn                if ('' !== $end) {rn                    $this->maxlen = $end - $start;rn                } else {rn                    $end = $this->file->getSize() - 1;rn                }rnrnBecause intval function works on every value, the end value of '' is 0. So the if statement is never true."
    },
    "10546193": {
        "title": "[TwigBridge][Translation] TwigExtractor duplicates with trans_default_domain",
        "body": "Given this template, all translations are extracted twice.rnrnOnce for the correct translation domain (as specified by `{% trans_default_domain %}` and once wrongly for the default domain. This applies to the current template, its parent and the embedded one.rnrn```html+jinjarn{% extends '::base.html.twig' %}rnrn{% trans_default_domain users %}rnrn{% block content_header %}rn    <h1>{{ 'heading.create'|trans }}</h1>rn{% endblock %}rnrn{% block content_layout %}rn    {# .. #}rnrn    {% embed ':Layout:content_full_size.html.twig'%}rn        {% trans_default_domain users %}rnrn        {# .. #}rn    {% endembed %}rn{% endblock %}rn```"
    },
    "10533801": {
        "title": "[Console] Clean the unit tests",
        "body": "Each of the unit test methods should be splitted in smaller blocks, see InputOptionTest for a bad example."
    },
    "9837048": {
        "title": "UniqueEntity in edit/update action",
        "body": "In entity I use: rn@UniqueEntity(fields={email}, groups={new, edit})rnrnbut i have a problem when I try validate in edit mode.rnWhen I submit form with not changed email field, then I get error This value is already used.rn"
    },
    "9836344": {
        "title": "[Console][Bug] Using short options with empty strings cause Uninitialized string offset: 0 notice.",
        "body": "Example:rnphp app/console server:run -d  localhost:8080rnPHP Notice:  Uninitialized string offset: 0 in ~/code/project/vendor/symfony/symfony/src/Symfony/Component/Console/Input/ArgvInput.php on line 222"
    },
    "9713017": {
        "title": "Finder doesn't respect valid glob syntax in name()",
        "body": "It would seem the Finder component does not respect an otherwise valid glob pattern in the name() method, for example:rnrn```rn->name('*.{jpg,jpeg,gif,png}');rn```rn"
    },
    "9649916": {
        "title": "[Form] Make exception handling consistent with other components",
        "body": "The form component currently implements exceptions differently than in other components. This should be made consistent."
    },
    "9245942": {
        "title": "Better naming for ContainerBuilder::findTaggedServiceIds",
        "body": "The name of ContainerBuilder::findTaggedServiceIds does not really fit it's return value. Instead of an array of service IDs (which would be my first guess for the method's return type), it returns and array of tags. The returned array's keys are the promised service IDs. rnrnMaybe this method's name should be changed to ContainerBuilder::findTagsByName or something similar, which reflects the method's purpose better.rnrnIn the same context: doen't the method Definition::getTag return all tags of the definition with a certain name? I don't want to be picky, but I would like these method names to give actual hints about their return values."
    },
    "8610435": {
        "title": "BinaryFileResponse - hashing strategy",
        "body": "Currently the hashing system in the new BinaryFileResponse has known limitations. It will be greatly beneficial if these are addressed by offering means to overcome these.nnhttps://github.com/symfony/symfony/commit/7322696378e96a812c78c1f23b80606b7fb06ac4#commitcomment-2193066nnAn option is to simplify the logic for hashing, by separating the hashing from the setting of the entity tag and from the file-input. This can be done simply by putting sha1_file() in a different method, that can be easily overridden, or by allowing a more OO approach by injecting the hashing strategy. The latter might be a bit more bulky but allows the most flexibility while maintaining clean separation of concerns."
    },
    "8419747": {
        "title": "Deprecated: IntlDateFormatter::setTimeZoneId():",
        "body": "As i am playing with 5.5.0 alpha1 and a sf application i get this.nn```nDeprecated: IntlDateFormatter::setTimeZoneId(): Use datefmt_set_timezone() instead, which also accepts a plain time zone identifier and for which this function is now an alias in /Users/Henrik/Work/myapp/vendor/symfony/symfony/src/Symfony/Component/Form/Extension/Core/Type/DateType.php line 262n```"
    },
    "8200475": {
        "title": "[Translation] XLIFF implementation broken by design",
        "body": "We are having an issue with the way the xliff format is implemented inside symfony2. rnThis was brought here before by @schmittjoh in #2252 but was closed down.rnrnI'm proposing to do a BC break here and change the XLIFF to a format where translation tools are actually useful. rne.g. Because we use keys as our translation source the tools like www.getlocalization.com show those keys as a source to be translated which according to the xliff specification is the right thing to do.rnrn```xmlrn<trans-unit id=<id> resname=<resname>>rn  <source>Original string</source>rn  <target>Target language translation</target>rn</trans-unit>rn```rnrnWhere the < id > is somesort of unique id e.g hash of  < resname >, The < resname > is set to translation key or Original string in case that translation is not based on the keys and the < source > tag contains the string in language the translations will be made from."
    },
    "7563119": {
        "title": "[Console] [Windows] recuperation of the console height and width for non english OS",
        "body": "[here](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Application.php#L853) and [here](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Console/Application.php#L875), a `exec(mode CON)` is made in order to parse line and column number of the console from Windows command.rnrnThis only work on english Windows.rnrnFor example with french Windows: rn```rn>php -r exec('MODE CON', $output);var_dump($output);rnarray(9) {rn  [0]=>  string(0) rn  [1]=>  string(27) Statut du pu00e9riphu00e9rique CON:rn  [2]=>  string(27) ---------------------------rn  [3]=>  string(26)     Lignesu00a0:          9999rn  [4]=>  string(24)     Colonnesu00a0:        80rn  [5]=>  string(24)     Vitesse clavieru00a0: 31rn  [6]=>  string(23)     Du00e9lai clavieru00a0:   1rn  [7]=>  string(25)     Page de codesu00a0:   437rn  [8]=>  string(0) rn}rn```rnCouldn't find yet a nice and universal way to do it yet. If anyone has an idea :)"
    },
    "7409912": {
        "title": "[2.1][Security] Check_path and logout fails on non latin path",
        "body": "RuntimeException: You must activate the logout in your security firewall configurationrnrnIn example:rn``` yamlrn# app/config/security.ymlrnsecurity:rn    firewalls:rn        main:rn            form_login:rnrn                # this is okrn                login_path:  /u0432u0445u043eu0434 rnrn                # check_path failsrn                check_path:  /u0430u0432u0442u043eu0440u0438u0437u0430u0446u0438u044frn            logout:rn                # logout path failsrn                path:   /u0432u044bu0445u043eu0434 rn```rnrnAll this happens because of SymfonyComponentSecurityHttpHttpUtils::checkRequestPath request query string not url decodedrnrn``` phprn    public function checkRequestPath(Request $request, $path)rn    {rn        if ('/' !== $path[0]) {rn            try {rn                $parameters = $this->urlMatcher->match($request->getPathInfo());rnrn                return $path === $parameters['_route'];rn            } catch (MethodNotAllowedException $e) {rn                return false;rn            } catch (ResourceNotFoundException $e) {rn                return false;rn            }rn        }rnrn        /**rn        * var_dump($request->getPathInfo()) ;rn        * var_dump($path);rn        * (/%d0%b2%d1%8b%d1%85%d0%be%d0%b4 === $request->getPathInfo()) truern        * ($path === urldecode($request->getPathInfo())) truern        */rn        return $path === $request->getPathInfo();rn    }rn```"
    },
    "7344101": {
        "title": "[Console] List available commands in the help command",
        "body": "The help command should at least mention the list command (only if it's enabled though), or just simply list available commands when called on the top level `console --help` (not `console foo --help`). rnrnSee composer/composer#1143"
    },
    "6841472": {
        "title": "JsonResponse can not be used to return an empty array",
        "body": "I have a REST API that is used for retrieving a list of objects. From our perspective this API could quite legitimately return no matching results (ie an empty array).nnJsonResponse force converts an empty array to an ArrayObject which then gets output as an empty object giving us the wrong results on the client side. Nothing in the JSON spec mandates that the top level element can not be an empty array as such this looks like a bug in the Symfony JsonResponse object.nnThe offending code is viewable [here](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/JsonResponse.php#L80). Fixing it should just be a matter of removing that if statement."
    },
    "6371759": {
        "title": "the help of the command does not display global options",
        "body": "Options available from the Application itself don't appear when displaying the help of a command by adding ``--help``. Because of this, users need to be aware of the component implementation to know that more options may be available and that they need to call ``app/console help`` without specifying a command name to show them.nnI suggest adding a section ``Global options`` in the help output to show them too, keeping them isolated from command-specific options (btw, weren't they displayed in the list at some point ?)"
    },
    "5776550": {
        "title": "Wrong display in the timeline when 2 listeners have the same short class name",
        "body": "When 2 listeners have the same short class name, the timeline display them in the same row (as if it was the same listener called twice) instead of using 2 rows.nnI saw it with AsseticBundle and NelmioApiDocBundle which have both a RequestListener (you may need to change the threshold to see them in the timeline as they are faster than 1ms)"
    },
    "5397810": {
        "title": "onFlush events with 2 or more dbal connections throw ErrorExceptions",
        "body": "nIn configuration's with 2 connections, onFlush events written to `(appDevDebugProject|appProd)Container.php` contain calls to addEventListener. The method signature for the 2nd connection is incorrect. Changing the order the connection's are specified produces the incorrect signature on whatever happens to be the 2nd connection.nnCompare the signatures for MysqlConnectionService and PlatConnectionService:nnn`appDevDebugProjectContainer.php`n```phpnprotected function getDoctrine_Dbal_MysqlConnectionService()n{n    $c->addEventListener(array(0 => 'onFlush'), $this->get('nrc_notice.notice.notice_listener'));n}nnnprotected function getDoctrine_Dbal_PlatConnectionService()n{n    $c->addEventListener(array(0 => array(0 => 'onFlush')), $this->get('nrc_notice.notice.notice_listener'));n}n```nnError Messagen```textnErrorException: Warning: Illegal offset type in /Applications/MAMP/htdocs/checknet.local/vendor/symfony/symfony/src/Symfony/Bridge/Doctrine/ContainerAwareEventManager.php line 115nnin /Applications/MAMP/htdocs/checknet.local/vendor/symfony/symfony/src/Symfony/Bridge/Doctrine/ContainerAwareEventManager.php line 115nat ErrorHandler->handle('2', 'Illegal offset type', '/Applications/MAMP/htdocs/checknet.local/vendor/symfony/symfony/src/Symfony/Bridge/Doctrine/ContainerAwareEventManager.php', '115', array('events' => array(array('onFlush')), 'listener' => object(NoticeListener), 'hash' => '000000000bfa891500000000295a660c', 'event' => array('onFlush'))) in /Applications/MAMP/htdocs/checknet.local/vendor/symfony/symfony/src/Symfony/Bridge/Doctrine/ContainerAwareEventManager.php line 115nat ContainerAwareEventManager->addEventListener(array(array('onFlush')), object(NoticeListener)) in /Applications/MAMP/htdocs/checknet.local/app/cache/dev/appDevDebugProjectContainer.php line 272nat appDevDebugProjectContainer->getDoctrine_Dbal_PlatConnectionService() in /Applications/MAMP/htdocs/checknet.local/app/bootstrap.php.cache line 194nat Container->get('doctrine.dbal.plat_connection') in /Applications/MAMP/htdocs/checknet.local/app/cache/dev/appDevDebugProjectContainer.php line 370nat appDevDebugProjectContainer->getDoctrine_Orm_PlatEntityManagerService() in /Applications/MAMP/htdocs/checknet.local/app/bootstrap.php.cache line 194nat Container->get('doctrine.orm.plat_entity_manager') in /Applications/MAMP/htdocs/checknet.local/vendor/symfony/symfony/src/Symfony/Bridge/Doctrine/ManagerRegistry.php line 35n```nnMy `config.yml`n```ymlndoctrine:n    dbal:n        default_connection: mysqln        connections:n            mysql:n                 driver: etc...n            plat:n                 driver_class:   etc...n```nnMy `services.yml`n```ymlnservices:n  nrc_notice.notice.notice_listener:n     class: SomeListenerClassn     arguments:n       container: '@service_container'n     tags:n        - { name: kernel.event_listener, event: nrc_notice.notice.change.approved, method: onNotify }n```"
    },
    "5330186": {
        "title": "HTTP/1.0 and caching",
        "body": "Symfony sends ```cache-control: no-cache``` header by default. This make HTTP/1.1-compatible client and (correctly configured) reverse proxy not to cache the response. nBut if a client supports only HTTP/1.0 protocol, the ```cache-control``` header will be ignored. To prevent caching page in HTTP/1.0 protocol, Symfony should send also Expires or Pragma headers by default."
    },
    "4892872": {
        "title": "[Form] prependView/appendModelTransformer() is needed in some cases",
        "body": "see #4473"
    },
    "4546032": {
        "title": "suggestion: webprofiler should not hide bottom page content",
        "body": "atm webprofiler has z-index positive to be over content. this is good but if I have some information in last line of output it is hidden under webprofiler. this could probably be fixed with setting for body margin bottom on height of webprofiler bar."
    },
    "4279499": {
        "title": "[Form] nonexistent option `index_generation`",
        "body": "https://github.com/symfony/symfony/blob/76ef8da030b7bee4751790fd0666cacd3ca3278b/UPGRADE-2.1.md mentions the `index_generation` option for choice fields. But this option doesn't seem to exist (anymore)."
    },
    "4236377": {
        "title": "[Form] add guess pattern",
        "body": "Bug fix: nornFeature addition: yesrnBackwards compatibility break: nornSymfony2 tests pass: yesrnFixes the following tickets: https://github.com/symfony/symfony/issues/3766rnTodo: -rnrnDue to some trouble when rebase my previous PR i open a new one with Master mergedrnRefs PR: https://github.com/symfony/symfony/pull/3927"
    },
    "4213658": {
        "title": "[Guesser] Add some comments in the code",
        "body": "That is basically adding the comments that have been made [in the PR](https://github.com/symfony/symfony/pull/3927#r713663) into the code.rnrnThe following guessers must be commented:rnrn- validator,rn- ORM,rn- ODM,rn- Propel"
    },
    "4206083": {
        "title": "[Finder] Fix regexp detection in FileContentFilterIterator",
        "body": "The iterator accepts both string and regexps, then there is a [test](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Finder/Iterator/FilecontentFilterIterator.php#L73) to detect regexps.rnrnThe test is flawed:rnrn- http://fr2.php.net/manual/en/regexp.reference.delimiters.php: A delimiter can be any non-alphanumeric, non-backslash, non-whitespace character, delimiters could also be { and }rn- http://fr2.php.net/manual/en/reference.pcre.pattern.modifiers.php: some modifiers are missing and there could be multiple delimiters.rnrnThe test need to be enhanced (and tested)"
    },
    "4205402": {
        "title": "Yaml parsing problem",
        "body": "Extracted from https://github.com/fabpot/yaml/issues/10:rnrnthe method parseQuotedScalar is used for two purposes, parsing a delimited string, and a plain string, but when its being given a plain string, it still treats it as delimited, and thus only returns the first string it matches.rnrnIf you use something like this, it doesn't really work:rnrntest: 'don't do somthin' like that'rnrnyou'd get 'test' to simply equal 'don'.rnrni'm using this package to do a bit of yaml validation, so i added this snippit to the methodrnrn    if ((!$delimiters) && (strlen($match[0]) < strlen($scalar))) {rn      throw new InvalidArgumentException(sprintf(Malformed YAML (check your use of apostrophes and quotes): n %s., substr($scalar, $i)));rn    }rnrnI'm sure this isn't the ideal fix, but I didn't want to battle with modifying the validation regex.rn"
    },
    "4187300": {
        "title": "[Form] property path for violations is incorrect",
        "body": "I have the following situation:rnrnThere is a form which shows a list of entities of some kind, kind of similar to a collection form. However, the entities need to be shown in some kind of hierarchy, so even though the app Data is a plain array, the clientData and form it self are built in the following way:rnrn```rnform:rn  Mon:rn    0: entityrn    1: entityrn  Tue:rn    0: entityrn```rnetc...rnrnThe transformation between the two is done using a DataTransformer on the topmost form: https://gist.github.com/2419554rnrnThe form works fine except for validation, for some reason all errors bubble up all the way to the top form, even if they should display on the bottom forms (form.Mon.0, form.Mon.1, etc). While trying to find out what was wrong, I came to the conclusion that the property path of the violations was incorrect, or at least not conform to the way the form was build up:rnrndata[0].fieldrndata[0].field2rndata[1].fieldrnrnrather thanrnrndata[Mon][0].fieldrndata[Mon][0].field2rndata[Mon][1].fieldrnrnThis causes them to bubble all the way up, as they cannot be mapped to the form."
    },
    "4169155": {
        "title": "UPGRADE-2.1.md is missing the switch from Symfony's DoctrineBundle to Doctrine's",
        "body": "One of the steps involved in upgrading Symfony from 2.0 to 2.1 is that the namespace of the DoctrineBundle needs to be changed in the AppKernel.phprnrn```rnnew SymfonyBundleDoctrineBundleDoctrineBundle(),rn```rnrnShould becomernrn```rnnew DoctrineBundleDoctrineBundleDoctrineBundle(),rn```rnrnThis information seems to be missing in the upgrade guide"
    },
    "4117969": {
        "title": "[Form] [DoctrineBridge] Better field type guessing for array doctrine type and array validator type",
        "body": "Bug fix: nornFeature addition: yesrnBackwards compatibility break: nornSymfony2 tests pass: yesrnFixes the following tickets: #1692rnTodo: -"
    },
    "4104878": {
        "title": "[Form] add guess pattern",
        "body": "Bug fix: nornFeature addition: yesrnBackwards compatibility break: nornSymfony2 tests pass: yesrnFixes the following tickets: https://github.com/symfony/symfony/issues/3766rnTodo: -"
    },
    "4058998": {
        "title": "[Form] form named search with a field named search => can't set default data",
        "body": "A form class named search with a single field named search sent over GET leads to the following url:rn```/?search=mysearchstring```rnIf the form is rendered using ```{{ form_widget(form) }}```rnrnI kinda like this behavior as it gives good looking url but on the other hand, you can't set default data properly.rnrn```$form->bindRequest($request);``` throws ```Expected argument of type array, string given```.rnrn```phprn$defaultData = array('search' => $request->query->get('search', ));rn$form = $this->createForm(new SearchFormType(), $defaultData);rn```rnfills the search field with the string ```Array```.rnrnWith a form named test and a single field named test you get the proper: ```/?test[test]=mysearchstring```.rnrnWhy does search provoke a unique behavior?rnHow can I have a simple url (?search=mysearchstring) while not breaking default data setting?rnrnFor reference here is the class I use:rnrn```phprn<?phprnrnnamespace AcmeSiteBundleFormType;rnrnuse SymfonyComponentFormAbstractType;rnuse SymfonyComponentFormFormBuilder;rnrnclass SearchFormType extends AbstractTypern{rn    public function buildForm(FormBuilder $builder, array $options)rn    {rn        $builderrn            ->add('search')rn        ;rn    }rnrn    public function getDefaultOptions(array $options)rn    {rn        return array(rn            'csrf_protection' => false,rn        );rn    }rnrn    public function getName()rn    {rn        return 'search';rn    }rn}rn```rnrnSymfony 2.0.11"
    },
    "3948095": {
        "title": "[Form] Constraint Assert/Regex does not use HTML5 pattern attribute",
        "body": "```phprn#Customer.phprnrnclass Customer {rn# (...)rnrn   /**rn    * @var string $phonern    * @AssertNotBlank()rn    * @AssertRegex(/^(d{2}) d{4}-d{4}$/)rn    * @ORMColumn(name=phone, type=string, length=14)rn    */rn   private $phone;rnrn# (...)rn}rn```rn```phprn#CustomerType.phprnrnclass CustomerType extends AbstractTypern{rn# (...)rn   public function buildForm(FormBuilder $builder, array $options)rn   {rn       $builderrn           ->add('phone', null, array('label' => 'Telefone'))rn       ;rn   }rn# (...)rn}rn```rnrnHTML Result:rnrn```htmlrn<input type=text id=paggy_admin_customer_phone name=paggy_admin_customer[phone] required=required maxlength=14 class=input-text>rn```rnrn*Workaround:* If I add the pattern property, duplicating the code of entity, it works as expected:rnrn```phprn#CustomerType.phprnrnclass CustomerType extends AbstractTypern{rn# (...)rn   public function buildForm(FormBuilder $builder, array $options)rn   {rn       $builderrn           ->->add('phone', 'text', array('label' => 'Telefone', 'pattern' => '^rn(d{2}) d{4}-d{4}$'))rn       ;rn   }rn# (...)rn}rn```rnrnHTML Result:rnrn```htmlrn<input type=text id=paggy_admin_customer_phone name=paggy_admin_customer[phone] required=required maxlength=14 pattern=^(d{2}) d{4}-d{4}$ class=input-text>rn```rnrnThanks!rn"
    },
    "3416929": {
        "title": "[Form] Choice List in a Form",
        "body": "Hi.rnrnHere is my form [ProductType](https://github.com/umpirsky/symfony-standard/blob/f59d47767a07bf1e06d55a2ebff13a13ae6aa199/src/Acme/DemoBundle/Form/ProductType.php) and [this](https://github.com/umpirsky/symfony-standard/blob/f59d47767a07bf1e06d55a2ebff13a13ae6aa199/src/Acme/DemoBundle/Controller/ProductController.php#L51) is how I use it in action.rnrnI expect it to render available categories in choice list, but it renders text field for category, I read the doc, and [this](http://epixa.com/2011/08/create-and-validate-a-choice-list-in-a-symfony-2-form.html) article, and tried the same, but all I get is a text field for category.rnrnIt renders available categories in choice list only if I remove [getDefaultOptions()](https://github.com/umpirsky/symfony-standard/blob/f59d47767a07bf1e06d55a2ebff13a13ae6aa199/src/Acme/DemoBundle/Form/ProductType.php#L23) from [ProductType](https://github.com/umpirsky/symfony-standard/blob/f59d47767a07bf1e06d55a2ebff13a13ae6aa199/src/Acme/DemoBundle/Form/ProductType.php) and explicitly pass [Product](https://github.com/umpirsky/symfony-standard/blob/f59d47767a07bf1e06d55a2ebff13a13ae6aa199/src/Acme/DemoBundle/Entity/Product.php) as a second parameter to [$this->createForm()](https://github.com/umpirsky/symfony-standard/blob/f59d47767a07bf1e06d55a2ebff13a13ae6aa199/src/Acme/DemoBundle/Controller/ProductController.php#L53), but I guess that is not the right way to do it."
    },
    "3100645": {
        "title": "[Form][DelegatingValidator] Fix path mapping for embedded forms",
        "body": "Bug fix: yesrnFeature addition: nornBackwards compatibility break: nornSymfony2 tests pass: DelegatingValidatorTestrnFixes the following tickets: [#1917](https://github.com/symfony/symfony/issues/1917), [#3018](https://github.com/symfony/symfony/issues/3018)rnrnTried to fix the bug where multi-input types (i.e. date, radio) of embedded forms get wrong path mappingrnrn    children[subForm][choiceType].datarnshould bernrn    children[subForm].data.choiceType"
    },
    "3065657": {
        "title": "[Dependency Injection] Service declaration tags should allow array types",
        "body": "Hello,rnrnUsing the following yml service declation:rn```(...)tags:rn        - { name: acme.myservice, sections:{main:true, side:true} }```rnrnproduces a correct array when parsed in a ComplierPass, but then throws:rnrn```ErrorException: Warning: DOMElement::setAttribute() expects parameter 2 to be string, rnarray given in (...)vendor/symfony/src/Symfony/Component/DependencyInjection/Dumper/XmlDumper.php line 141```"
    },
    "2949851": {
        "title": "[Validator] StaticMethodLoader invokes wrong method",
        "body": "    interface FooInterface {rnrn        public static function loadValidatorMetadata($metadata);rn    }rnrn    class Bar implements FooInterface {rnrn        private $baz = 'bogus';rnrn        public static function loadValidatorMetadata($metadata) {rn            $metadata->addPropertyConstraint('baz', new AssertMinLength(10));rn        }rnrn    }rnrn    $validator = new Validator(rn                    new ClassMetadataFactory(new StaticMethodLoader()),rn                    new ConstraintValidatorFactory()rn    );rn    $violations = $validator->validate(new Bar);rn    if ($violations->count()) {rn        throw new Exception($violations);rn    }rnrnI have classes that needs to be validated with ```SymfonyComponentValidator``` and this classes uses ```StaticMethodLoader``` strategy for validation. I declared ```loadValidatorMetadata``` method in interface but ```StaticMethodLoader``` invokes wrong method and following error occures.rnrn    Fatal error: Uncaught exception 'ReflectionException' with message 'Trying to invoke abstract method FooInterface::loadValidatorMetadata()' in Symfony/Component/Validator/Mapping/Loader/StaticMethodLoader.php on line 44rnrn    ReflectionException: Trying to invoke abstract method HeatbeatFooInterface::loadValidatorMetadata() in /Symfony/Component/Validator/Mapping/Loader/StaticMethodLoader.php on line 44rnrnrnLooks like there is a problem with Reflection. "
    },
    "2915647": {
        "title": "[Validator] UniqueEntityValidator can't validate values of proxy objects",
        "body": "If you have an association and have that as one of your fields for using the SymfonyBridgeDoctrineValidatorConstraintsUniqueEntityValidator the unique validation wont work if your object is a proxy and hasn't had the identifier field hydrated yet.rnrnI didn't know how to put this into a unit test but did work out a very crude fix in the validator that i'm sure isn't suitable to be a patch but I think helps illustrate the problem better.rnrn```phprn            if (isset($class->associationMappings[$fieldName])) {rnrn                // very crude fix to the problemrn                if ($criteria[$fieldName] instanceof DoctrineORMProxyProxy) {rn                    $criteria[$fieldName]->__load();rn                }rnrn                $relatedClass = $em->getClassMetadata($class->associationMappings[$fieldName]['targetEntity']);rn                $relatedId = $relatedClass->getIdentifierValues($criteria[$fieldName]);rnrn                if (count($relatedId) > 1) {rn                    throw new ConstraintDefinitionException(sprintf('Associated entities are not allowed to have more than one identifier field to be part of a unique constraint in %s#%s.', $class->name, $fieldName));rn                }rn                $criteria[$fieldName] = array_pop($relatedId);rn            }rnrn```rnrnI experienced this on Symfony 2.0.9, running on OS X Lion"
    },
    "2777072": {
        "title": "[Form][Guesser] The prototype is an empty string for a collection which is not one-to-many",
        "body": "The prototype is an empty string for a collection which is not backed by one-to-many relationshiprnrn```phprn{% debug form_widget(form.extraAttributes.get('prototype')) %}rn```rnreturns `string(0) `rnrnrnbuildForm methodrnrn```phprn$builderrn            ->add('images', 'collection', array('type' => new ProductimageType(), 'allow_add' => true, 'allow_delete' => true, 'label'=> 'Imagini', 'prototype' => true ))rn            ->add('extraAttributes', 'collection', array('type' => 'hidden', 'allow_add' => true, 'allow_delete' => true, 'label'=> 'Attribute', 'prototype' => true))rn        ;rn```rn`images` ,which is one-to-many relationship in Doctrine2, displays the prototype properly, whereas `extraAttributes` prototype is emptyrnrnrnField definitions:rnrn```phprn /**rn     * @ORMOneToMany(targetEntity=Productimage, mappedBy=product, orphanRemoval=true, cascade={persist})rn     */rn    private $images;rnrn  /**rn     * @var arrayrn     * @ORMColumn(name=Other, type=array, nullable=true)rn     */rn    private $extraAttributes;rn```rnrnI add rnrn```htmlrn<input class=form-hidden type=hidden id=product_extraAttributes_0_type name=product[extraAttributes][0][type]>rn```rnmanually via javascript, and the engine properly adds fields as intended, so basically everything works except the prototype generation.rn"
    },
    "2638748": {
        "title": "[Form][DelegatingValidator] Duplicated error when using a DataTransformer and a NotBlank constraint",
        "body": "If a DataTransformer fails, the value is set to ``null`` in the underlying object. This is logical as we don't have any value to set in it reliably (think for instance of the case where your DataTransformer transforms an id into an object and the setter uses a typehint). But this leads to an issue if the validation has a NotBlank or NotNull constraint on the field as you will then see an error ``This value should not be blank`` on the field (which was not blank in the client data).rnrnSee #2413 for a place where this error occurs often: the repeated type."
    },
    "2356260": {
        "title": "[Form][DelegatingValidator] Form error bubbles to the top with @Collection constraint and arrays",
        "body": "With the following code, errors related to Post->date['year'] are attached to the form instead of the 'year' element:rnrn``` phprn<?phprnclass Postrn{rn    /** @Collection(fields={year=@NotBlank}) */rn    public $date = array('year' => null);rn}rnrn$dateForm = $this->get('form.factory')rn    ->createNamedBuilder('form', 'date')rn    ->add('year', 'text');rnrn$form = $this->get('form.factory')rn    ->createBuilder('form', new Post)rn    ->add($dateForm)rn    ->getForm()rn    ;rnrn$form->bind(array());rnrnecho $form->getErrorsAsString();rnrn```rnrngetErrorsAsString output:rnrn```rnERROR: This value should not be blankrndate:rn    year:rn        No errorsrn```rnrnExpected output:rnrnrn```rndate:rn    year:rn        ERROR: This value should not be blankrn```"
    },
    "2279872": {
        "title": "[Validator] what about to have MinCount and MaxCount validators",
        "body": "Let's say we have a bloger which can assign from one to five tags to his blog. While submiting the server should count  tags and check whether the collection in the allowed range. It can be done with `Choice` validator and `min` and `max` options. But in this case we have such problems:rnrn* It should fetch all tags from db to check that choices are valid, rn* Very hard to define callback in case of using `$repository->findAll()`rnrnFrom another side we have `MinMax` and `MinLengthMaxLength` validators but they very restrictive (the first takes only integers and second one only strings)rnrnSo I am thinking of moving count validation rules from Choice to a new validators called `MinCount` and `MaxCount`rnrnBTW I can do a PR if you find it useful."
    },
    "2170024": {
        "title": "[HttpFoundation] UploadedFile needs Locale parameter to pass",
        "body": "Because function basename() is locale aware, the constructor need to pass a locale parameter and set it in constructor. Without setting a locale non-latin first characters cut off from beginning until a latin letter or a non-letter character found in the name.rnrnfrom HttpFoundationFileUploadedFile.phprnrn      rn        $this->originalName = basename($originalName);rn        $this->mimeType = $mimeType ?: 'application/octet-stream';rn        $this->size = $size;rn        $this->error = $error ?: UPLOAD_ERR_OK;rn        $this->test = (Boolean) $test;rnrn        parent::__construct($path, UPLOAD_ERR_OK === $this->error);rn    }rnrnShould be like this (an example):rn        setlocale(LC_ALL, 'ru_RU.UTF8');rn        $this->originalName = basename($originalName);rn        $this->mimeType = $mimeType ?: 'application/octet-stream';rn        $this->size = $size;rn        $this->error = $error ?: UPLOAD_ERR_OK;rn        $this->test = (Boolean) $test;rnrn        parent::__construct($path, UPLOAD_ERR_OK === $this->error);rn    }"
    },
    "2056030": {
        "title": "[Validator] Allow Callback validator to be put on a field",
        "body": "Hey there,rnrnIs there a reason I'm missing that the callback validator *must* be applied to a class and not to a property?rnI need to blacklist values from a property and I'm forced to apply the validator to the class."
    },
    "1415333": {
        "title": "[Form][DelegatingValidator] RepeatedType error keeps on bubbling to root form",
        "body": "When RepeatedType is nested inside another form, error messages such as This value should not be blank bubble up to the root form, instead of appearing above the field in the nested form.rnrnTo illustrate this issue, I have put together the following example:rnrn* Two types where one is nested in the other (child inside parent).rn* Both types have the RepeatedType field.rn* Both RepeatedType fields are NotBlank.rnrnAs you can see, the error message for the RepeatedType in the main type, appears right above the fields, but this doesn't happen for the nested type.rnrn![Screenshot](https://lh4.googleusercontent.com/-J-fC_SSILqM/Tkh8HkaFA9I/AAAAAAAAABg/rhRPP52nizQ/screenshot.png)rnrnHere are the types and models that can be used to demonstrate the issue:rnrn    class RegistrationParentrn    {rn        public $registrationChild;rnrn        /**rn         * @AssertNotBlank()rn         */rn        public $plainPassword;rn    }rnrnrn    class RegistrationChildrn    {rn        /**rn         * @AssertNotBlank()rn         */rn        public $plainPassword;rn    }rnrnrn    class RegistrationParentFormType extends AbstractTypern    {rn       public function buildForm(FormBuilder $builder, array $options)rn       {rn       $builderrn          ->add('registrationChild', new RegistrationChildFormType())rn          ->add('plainPassword', 'repeated', array(rn             'type' => 'password',rn          ))rn       ;rn     }rnrnrn    class RegistrationChildFormType extends AbstractTypern    {rn       public function buildForm(FormBuilder $builder, array $options)rn       {rn          $builderrn             ->add('plainPassword', 'repeated', array(rn                'type' => 'password',rn             ))rn          ;rn     }rn"
    },
    "1346672": {
        "title": "An exception is thrown when the firewall matches a inexistent url and try to redirect to a route using the locale",
        "body": "When using a login route with the pattern ``/{_locale}/login``, the redirection works well when accessing an existing url secured by the firewall. But when accessing a inexistent url that matches the access control rule (easy when the rule secures ``^/admin``), the redirection to the login url fails with this exception:rnrn```rnThe fos_user_security_login route has some missing mandatory parameters (_locale).rn500 Internal Server Error - MissingMandatoryParametersException rn```"
    },
    "1322186": {
        "title": "$_format is lost on failure_forward",
        "body": "I've been debugging this for the past few days but to no avail.rnrnThis is the excerpt from my security file:rnrn```rnsecurity:rn    firewalls:rn        default_json:rn            poshtar_login:rn                login_path: /login.jsonrn                check_path: /login.jsonrn                failure_forward: truern            context: storern            anonymous:  ~rn            logout:     { path: /logout }rn            pattern:    /.*rn            provider:   poshtarrn```rnrnWhat I was able to figure out using a debugger is that the content type for subresponse? is set correctly to json, but sometime later, when responses get merged? and the request is asked again for a format the request returns html as the attributes bag is empty (controller resolver set the proper format in subrequest) so data sent to the browser has a wrong content type."
    },
    "1288490": {
        "title": "http basic authentication broken with PHP as cgi/fastCGI under Apache",
        "body": "The keys PHP_AUTH_USER and PHP_AUTH_PW are not present in the superglobal $_SERVER, so http basic authentication needs to be handled a little differently.rnrnThis also affects functional tests which require http basic auth to authenticate.rnrnBasically the workaround is two parts:rnrn1. A rewrite rule to pack the username and password into an environment variable:rnrn    <IfModule mod_rewrite.c>rn        RewriteEngine onrn        RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]rn    </IfModule>rnrn2. Extract the info from the environment variable:rnrn    list($_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW']) = explode(':' , base64_decode(substr($_SERVER['HTTP_AUTHORIZATION'], 6)));rnrnrnSee below for more details.rnrnhttp://orangejuiceliberationfront.com/http-auth-with-php-in-cgi-mode-e-g-on-dreamhost/rnhttp://www.besthostratings.com/articles/http-auth-php-cgi.htmlrnrnrn"
    },
    "1288124": {
        "title": "[Form][DelegatingValidator] Conflict between a field and collection field with the same name",
        "body": "Use case : http://gist.github.com/1106538rnrnWhen the Entry title input value is blank, the form error is rendered next to the title input field of the specs field instead of the title one.rnrnIn the EntrySpecType, If i change the name of the title field to whateverisnotitle, everything goes fine, and i assure you i've just changed that ! ;-)rnrnThat's a bit inconvenient.rnrnrn"
    },
    "1219548": {
        "title": "[Form][Guesser] Symfony should guess a better field type for Doctrine 'array' type",
        "body": "Currently defaults to a textbox which just displays 'Array'."
    },
    "19628175": {
        "title": "[DomCrawler] SymfonyComponentDomCrawlerCrawler::addContent guess charset from html?",
        "body": "I just download this page.rnhttp://search.jd.com/Search?keyword=%E6%96%87%E5%AD%A6&enc=utf-8&area=22&book=yrnit do not send a header of charset in http response header and I put it content to Crawler::addContent,Then Crawler use wrong charset ISO-8859-1.rnIt works fine if I use follow code:rn```rn        $crawler = new Crawler();rn        $crawler->addHtmlContent($content,'GBK');rn```rnIs there some way to guess charset from html meta?"
    }
}